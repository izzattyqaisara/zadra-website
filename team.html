<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Team — Zadra Ingénieurs</title>
  <link rel="stylesheet" href="style.css" />
  <style>
    :root{
      --bg:#f7f4f1; --ink:#2a1e1a;
      --primary:#7b4b2a; --primary-2:#9b6944;
      --card:#fff; --muted:#7a6a61;
      --ring:rgba(123,75,42,.25);
      --shadow:0 10px 30px rgba(0,0,0,.07), 0 4px 10px rgba(0,0,0,.05);
      --radius:20px;
      --line:#d7c7ba;               /* connector line color */
    }
    *{box-sizing:border-box}
    html,body{margin:0;background:var(--bg);color:var(--ink);
      font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Noto Sans,Ubuntu,Cantarell,Helvetica Neue,Arial}
    body{padding-top:72px}

    /* HERO (same vibe as Careers) */
    .hero{
      position:relative;overflow:hidden;
      padding:clamp(48px,6vw,96px) 20px;display:flex;
      /* added gradient to match other sections */
      background:linear-gradient(180deg,#efe3d7 0%, #f7f4f1 100%);
      border-bottom:1px solid #ecdccc;
    }
    .hero-inner{max-width:1200px;margin:0 auto;display:grid;grid-template-columns:repeat(2,minmax(320px,1fr));gap:clamp(20px,4vw,48px);align-items:center;justify-items:center;justify-content:center}
    @media (max-width:900px){.hero-inner{grid-template-columns:1fr}}
    .hero-card{background:linear-gradient(135deg,#fff,#fff8f2);border:1px solid #f0e8e2;border-radius:var(--radius);padding:clamp(20px,3vw,36px);box-shadow:var(--shadow)}
    .eyebrow{display:inline-block;font-size:12px;letter-spacing:.18em;text-transform:uppercase;color:var(--primary);background:#f3e7de;border-radius:999px;padding:6px 12px;font-weight:700}
    h1{margin:14px 0 6px;font-weight:800;line-height:1.1;font-size:clamp(28px,3.4vw,44px)}
    .lead{color:var(--muted);font-size:clamp(15px,1.4vw,18px);margin:8px 0 0}

    .wrap{max-width:1200px;margin:0 auto;padding:0 20px 80px}
    .section-title{margin:34px 0 10px;font-size:22px;text-align:center}

    /* === ORG CHART === */
    .chart{
      background:var(--card);border:1px solid #eee2da;border-radius:20px;box-shadow:var(--shadow);
      padding:20px 16px;margin-bottom:28px
    }
    .chart h3{margin:6px 0 20px;text-align:center}
    .row{position:relative;display:flex;flex-wrap:wrap;gap:14px;justify-content:center}
    .row + .row{margin-top:14px}

    .person{
      position:relative;width:260px;max-width:100%;
      background:#fff;border:1px solid #efe4dc;border-radius:16px;box-shadow:var(--shadow);overflow:hidden;text-align:center
    }
    .ph{aspect-ratio:4/3;background:#f7ede4;display:flex;align-items:center;justify-content:center}
    .ph img{width:100%;height:100%;object-fit:cover;display:block}
    .info{padding:12px}
    .name{font-weight:800}
    .role{color:var(--muted);font-size:13px;line-height:1.3;margin-top:4px}

    /* vertical stems under top/manager cards */
    .stem-down{position:absolute;left:50%;transform:translateX(-0.5px);width:1px;background:var(--line)}
    .row.top .person .stem-down{bottom:-14px;height:14px}
    .row.manager .person .stem-down{bottom:-18px;height:18px}

    /* staff rail (horizontal) with ticks up to each card */
    .row.staff{padding-top:26px}
    .row.staff::before{
      content:"";position:absolute;left:3%;right:3%;top:8px;height:1px;background:var(--line)
    }
    .row.staff .person::before{
      content:"";position:absolute;left:50%;top:-18px;transform:translateX(-0.5px);width:1px;height:18px;background:var(--line)
    }

    /* connector from staff rail down to the last card (if any) */
    .row.tail{margin-top:18px}
    .row.tail::before{
      content:"";position:absolute;left:50%;top:-18px;transform:translateX(-0.5px);width:1px;height:18px;background:var(--line)
    }

    /* Gallery */
    .gallery{background:var(--card);border:1px solid #eee2da;border-radius:20px;box-shadow:var(--shadow);padding:16px;margin-top:34px}
    .viewer{position:relative;border-radius:16px;overflow:hidden;background:linear-gradient(180deg,#fff,#fff7f0);border:1px solid #f0e8e2}
    .stage{position:relative;width:100%;aspect-ratio:16/9;overflow:hidden}
    .stage img{position:absolute;inset:0;width:100%;height:100%;object-fit:cover;opacity:0;transition:opacity .35s ease}
    .stage img.active{opacity:1}
    .controls{display:flex;align-items:center;justify-content:space-between;gap:10px;padding:12px 4px}
    .btn{appearance:none;border:1px solid #e6ddd6;background:#fff;padding:10px 14px;border-radius:12px;font-weight:700;color:var(--primary);cursor:pointer}
    .btn:hover{transform:translateY(-1px)}
    .dots{display:flex;gap:6px;align-items:center;flex-wrap:wrap}
    .dot{width:8px;height:8px;border-radius:999px;background:#e6ddd6}
    .dot.active{background:var(--primary)}
    .thumbs{display:grid;grid-auto-flow:column;grid-auto-columns:minmax(120px,1fr);gap:10px;overflow-x:auto;padding:6px 2px 2px;scroll-snap-type:x mandatory}
    .thumb{position:relative;border-radius:12px;overflow:hidden;border:2px solid transparent;scroll-snap-align:center;cursor:pointer;min-height:80px;background:#f5eee7}
    .thumb img{width:100%;height:100%;object-fit:cover;display:block}
    .thumb.active{border-color:var(--primary)}
    .thumb::after{content:"";position:absolute;inset:0;box-shadow:inset 0 0 0 1px rgba(0,0,0,.06);border-radius:12px}
  </style>
</head>
<body>
  <!-- NAV INCLUDE -->
  <div data-include="nav.html"></div>
  <script type="module">import './importer.js';</script>
  <script type="module">import './main.js';</script>

  <script>
(function () {
  function init() {
    const nav = document.querySelector('.site-nav');
    if (!nav) return false;

    // Ensure main <ul> has a class for our CSS
    const menu = nav.querySelector('ul');
    if (!menu) return false;
    menu.classList.add('menu');

    // Create a hamburger if not present
    let toggle = nav.querySelector('.menu-toggle');
    if (!toggle) {
      toggle = document.createElement('button');
      toggle.className = 'menu-toggle';
      toggle.setAttribute('aria-label', 'Menu');
      toggle.setAttribute('aria-expanded', 'false');
      toggle.innerHTML = '&#9776;'; // hamburger icon
      const logo = nav.querySelector('.logo');
      (logo && logo.parentNode)
        ? logo.parentNode.insertBefore(toggle, logo.nextSibling)
        : nav.insertBefore(toggle, nav.firstChild);
    }

    // Open/close the drawer on mobile
    toggle.addEventListener('click', () => {
      const open = nav.classList.toggle('is-open');
      toggle.setAttribute('aria-expanded', open ? 'true' : 'false');
    });

    // Expand/collapse "About" submenu on mobile
    nav.querySelectorAll('li.has-sub > a').forEach(a => {
      a.addEventListener('click', (e) => {
        if (window.matchMedia('(max-width: 820px)').matches) {
          e.preventDefault();
          a.parentElement.classList.toggle('open');
        }
      });
    });

    // Close drawer when tapping outside
    document.addEventListener('click', (e) => {
      if (!nav.contains(e.target)) nav.classList.remove('is-open');
    });

    return true;
  }

  // Run after nav.html is injected by importer.js
  function tryInitOnce() { if (!init()) setTimeout(tryInitOnce, 50); }

  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', tryInitOnce);
  } else {
    tryInitOnce();
  }
  // If your importer dispatches a custom event
  document.addEventListener('include:loaded', tryInitOnce);
})();
</script>

  <!-- HERO -->
  <header class="hero">
    <div class="hero-inner">
      <div class="hero-card">
        <span class="eyebrow">Our people</span>
        <h1>Two teams. One standard.</h1>
        <p class="lead">A clear structure that keeps quality high and collaboration friendly.</p>
      </div>
      <div class="hero-card">
        <p class="lead">Browse the organisational charts below and a gallery of team moments.</p>
      </div>
    </div>
  </header>

  <main class="wrap">
    <!-- ===== Technical Team ===== -->
    <section class="chart">
      <h3>Technical Team</h3>

      <!-- top -->
      <div class="row top">
        <article class="person">
          <span class="stem-down"></span>
          <div class="ph"><img src="images/director%20new.jpg" alt="Ir. Ts. Hj Zamhuri" loading="lazy" onerror="this.style.display='none'"></div>
          <div class="info">
            <div class="name">Ir. Ts. Hj Zamhuri</div>
            <div class="role">Managing Director<br/>BIM Modeller</div>
          </div>
        </article>
      </div>

      <!-- manager -->
      <div class="row manager">
        <article class="person">
          <span class="stem-down"></span>
          <div class="ph"><img src="images/dannish.jpeg" alt="Ishraf Dannish" loading="lazy" onerror="this.style.display='none'"></div>
          <div class="info">
            <div class="name">Ishraf Dannish</div>
            <div class="role">Operation Manager<br/>BIM Modeller</div>
          </div>
        </article>
      </div>

      <!-- staff rail -->
      <div class="row staff">

        <article class="person">
          <div class="ph"><img src="images/nazaitul.jpeg" alt="Nazaitul Awizah" loading="lazy" onerror="this.style.display='none'"></div>
          <div class="info">
            <div class="name">Nazaitul Awizah</div>
            <div class="role">Design Engineer (Civil)<br/>BIM Modeller</div>
          </div>
        </article>

         <article class="person">
          <div class="ph"><img src="images/ojen.jpeg" alt="Rozain" loading="lazy" onerror="this.style.display='none'"></div>
          <div class="info">
            <div class="name">Danish Rozain</div>
            <div class="role">Design Engineer <br/> (Civil, Hydrology & Geotechnical)</div>
          </div>
        </article>

          <article class="person">
          <div class="ph"><img src="images/rachel.jpeg" alt="Rachel Honeychurch" loading="lazy" onerror="this.style.display='none'"></div>
          <div class="info">
            <div class="name">Rachel Honeychurch</div>
            <div class="role">Design Engineer (Structure)</div>
          </div>
        </article>

        <article class="person">
          <div class="ph"><img src="images/faiq.jpeg" alt="kiv" loading="lazy" onerror="this.style.display='none'"></div>
          <div class="info">
            <div class="name">Faiq Omar</div>
            <div class="role">Design Engineer (Civil)</div>
          </div>
        </article>

          <article class="person">
          <div class="ph"><img src="images/darshiella.jpeg" alt="kiv" loading="lazy" onerror="this.style.display='none'"></div>
          <div class="info">
            <div class="name">Darshiella</div>
            <div class="role">Design Engineer (Geotechnical)</div>
          </div>
        </article>

          <article class="person">
          <div class="ph"><img src="images/azril.jpeg" alt="kiv" loading="lazy" onerror="this.style.display='none'"></div>
          <div class="info">
            <div class="name">Azril Mirwan</div>
            <div class="role">Design Engineer (Structure)</div>
          </div>
        </article>

      </div>

      <!-- tail to draughtsperson -->
      <div class="row tail">
        <article class="person">
          <div class="ph"><img src="images/azirah.jpeg" alt="Azirah" loading="lazy" onerror="this.style.display='none'"></div>
          <div class="info">
            <div class="name">Azirah</div>
            <div class="role">Draughtsperson</div>
          </div>
        </article>

                <article class="person">
          <div class="ph"><img src="images/pika.jpeg" alt="Azirah" loading="lazy" onerror="this.style.display='none'"></div>
          <div class="info">
            <div class="name">Afiqah Diyana</div>
            <div class="role">Draughtsperson</div>
          </div>
        </article>
      </div>
    </section>

    <!-- ===== Admin Team ===== -->
    <section class="chart">
      <h3>Admin Team</h3>

      <!-- top -->
      <div class="row top">
        <article class="person">
          <span class="stem-down"></span>
          <div class="ph"><img src="images/director%20new.jpg" alt="Ir. Ts. Hj Zamhuri" loading="lazy" onerror="this.style.display='none'"></div>
          <div class="info">
            <div class="name">Ir. Ts. Hj Zamhuri</div>
            <div class="role">Managing Director</div>
          </div>
        </article>
      </div>

      <!-- managers -->
      <div class="row manager">
        <article class="person">
          <span class="stem-down"></span>
          <div class="ph"><img src="images/zety.jpeg" alt="Izzaty Qaisara" loading="lazy" onerror="this.style.display='none'"></div>
          <div class="info">
            <div class="name">Izzatty Qaisara</div>
            <div class="role">Software Engineer</div>
          </div>
        </article>

        <article class="person">
          <span class="stem-down"></span>
          <div class="ph"><img src="images/liza.jpeg" alt="Nortiza Liu" loading="lazy" onerror="this.style.display='none'"></div>
          <div class="info">
            <div class="name">Norliza Liu</div>
            <div class="role">Admin Exec.</div>
          </div>
        </article>
       <article class="person">
          <div class="ph"><img src="images/dyg.jpeg" alt="Dyg Nur Mardhiah" loading="lazy" onerror="this.style.display='none'"></div>
          <div class="info">
            <div class="name">Dyg Nur Mardhiah</div>
            <div class="role">Admin Exec.</div>
          </div>
        </article>
      </div>

      <!-- staff rail -->
      <div class="row staff">
        <article class="person">
          <div class="ph"><img src="images/farah.jpeg" alt="Farah" loading="lazy" onerror="this.style.display='none'"></div>
          <div class="info">
            <div class="name">Farah</div>
            <div class="role">Admin Exec.</div>
          </div>
        </article>

        <article class="person">
          <div class="ph"><img src="images/listra.jpeg" alt="Listra Jahah Anak Jimmy" loading="lazy" onerror="this.style.display='none'"></div>
          <div class="info">
            <div class="name">Listra Jahah Anak Jimmy</div>
            <div class="role">Admin Exec.</div>
          </div>
        </article>

                <article class="person">
          <div class="ph"><img src="images/olivia.jpeg" alt="Listra Jahah Anak Jimmy" loading="lazy" onerror="this.style.display='none'"></div>
          <div class="info">
            <div class="name">Olivia</div>
            <div class="role">Admin Exec.</div>
          </div>
        </article>
      </div>
    </section>

    <!-- ===== Team Gallery (only Team-gallery-*.jpeg) ===== -->
    <section class="gallery">
      <h3 class="section-title" style="margin-top:0">Team Gallery</h3>
      <div class="viewer">
        <div class="stage" id="stage"></div>
      </div>
      <div class="controls">
        <button class="btn" id="prevBtn" aria-label="Previous">← Prev</button>
        <div class="dots" id="dots"></div>
        <div style="display:flex;gap:8px;align-items:center">
          <button class="btn" id="playBtn" aria-label="Autoplay">▶︎ Play</button>
          <button class="btn" id="nextBtn" aria-label="Next">Next →</button>
        </div>
      </div>
      <div class="thumbs" id="thumbs"></div>
    </section>

      <!-- ===== Professional Moments (seminars / conferences / trainings) ===== -->
<section class="gallery">
  <h3 class="section-title" style="margin-top:0">Team Training</h3>

  <div class="viewer">
    <div class="stage" id="pro-stage"></div>
  </div>

  <div class="controls">
    <button class="btn" id="pro-prev" aria-label="Previous">← Prev</button>
    <div class="dots" id="pro-dots"></div>
    <div style="display:flex;gap:8px;align-items:center">
      <button class="btn" id="pro-play" aria-label="Autoplay">▶︎ Play</button>
      <button class="btn" id="pro-next" aria-label="Next">Next →</button>
    </div>
  </div>

  <div class="thumbs" id="pro-thumbs"></div>
</section>

  </main>

<script>
/* ---------- Ensure Lightbox HTML exists ---------- */
(function ensureLightbox(){
  if (document.getElementById('lightbox')) return;
  const wrap = document.createElement('div');
  wrap.innerHTML = `
  <div class="lb" id="lightbox" aria-hidden="true" style="display:none">
    <div class="lb__frame">
      <div class="lb__top">
        <span class="lb__btn" id="lbCounter">1 / 1</span>
        <button class="lb__btn" id="lbClose" aria-label="Close">Close ✕</button>
      </div>
      <img id="lbImg" class="lb__img" alt="">
      <div class="lb__nav">
        <button id="lbPrev" aria-label="Previous">‹</button>
        <button id="lbNext" aria-label="Next">›</button>
      </div>
      <div class="lb__caption" id="lbCaption"></div>
    </div>
  </div>`;
  document.body.appendChild(wrap.firstElementChild);
})();

/* ---------- Shared Lightbox ---------- */
const Lightbox = (function(){
  const el  = document.getElementById('lightbox');
  const img = document.getElementById('lbImg');
  const cap = document.getElementById('lbCaption');
  const ctr = document.getElementById('lbCounter');
  const btnPrev = document.getElementById('lbPrev');
  const btnNext = document.getElementById('lbNext');
  const btnClose= document.getElementById('lbClose');

  let list = [];  // [{src, caption}]
  let idx  = 0;

  function render(){
    if (!list.length) return;
    const item = list[idx];
    img.src = item.src;
    img.alt = item.caption || '';
    cap.textContent = item.caption || '';
    ctr.textContent = `${idx+1} / ${list.length}`;
    el.style.display = 'grid';
  }
  function open(newList, startIndex=0){
    list = newList || [];
    idx  = Math.max(0, Math.min(startIndex, list.length-1));
    el.setAttribute('aria-hidden','false');
    render();
    document.addEventListener('keydown', onKey);
  }
  function close(){
    el.setAttribute('aria-hidden','true');
    el.style.display = 'none';
    document.removeEventListener('keydown', onKey);
  }
  function next(){ idx = (idx+1) % list.length; render(); }
  function prev(){ idx = (idx-1+list.length) % list.length; render(); }
  function onKey(e){
    if (e.key === 'Escape') close();
    if (e.key === 'ArrowRight') next();
    if (e.key === 'ArrowLeft')  prev();
  }
  btnClose.addEventListener('click', close);
  btnNext.addEventListener('click', next);
  btnPrev.addEventListener('click', prev);
  el.addEventListener('click', (e)=>{ if(e.target === el) close(); });

  return { open };
})();

/* ---------- Helper: get element by prefixed OR legacy id ---------- */
function getId(prefix, base, legacyId){
  return document.getElementById(`${prefix}-${base}`) || document.getElementById(legacyId);
}

/* ---------- Reusable gallery (supports prefixed OR legacy IDs) ---------- */
function createGallery(prefix, images, label){
  const stage   = getId(prefix,'stage','stage');
  const dots    = getId(prefix,'dots','dots');
  const thumbs  = getId(prefix,'thumbs','thumbs');
  const prevBtn = getId(prefix,'prev','prevBtn');
  const nextBtn = getId(prefix,'next','nextBtn');
  const playBtn = getId(prefix,'play','playBtn');
  if (!stage || !dots || !thumbs || !prevBtn || !nextBtn || !playBtn) return;

  let current = 0, timer = null;

  const LB_ITEMS = images.map((name,i)=>({
    src: `images/${name}`,
    caption: `${label} ${i+1}`
  }));

  // Build DOM
  images.forEach((name, i) => {
    const img = document.createElement('img');
    img.src = `images/${name}`;
    img.alt = `${label} ${i+1}`;
    img.loading = 'lazy';
    if (i === 0) img.classList.add('active');
    img.style.cursor = 'zoom-in';
    img.addEventListener('click', ()=> Lightbox.open(LB_ITEMS, i));
    stage.appendChild(img);

    const dot = document.createElement('div');
    dot.className = 'dot' + (i===0 ? ' active' : '');
    dot.addEventListener('click', () => go(i, true));
    dots.appendChild(dot);

    const th = document.createElement('div');
    th.className = 'thumb' + (i===0 ? ' active' : '');
    th.innerHTML = `<img src="images/${name}" alt="Thumb ${i+1}" loading="lazy">`;
    th.addEventListener('click', () => { go(i, true); Lightbox.open(LB_ITEMS, i); });
    thumbs.appendChild(th);
  });

  const imgs = Array.from(stage.querySelectorAll('img'));

  function setActive(idx){
    imgs.forEach((im,i)=>im.classList.toggle('active', i===idx));
    dots.querySelectorAll('.dot').forEach((d,i)=>d.classList.toggle('active', i===idx));
    thumbs.querySelectorAll('.thumb').forEach((t,i)=>{
      t.classList.toggle('active', i===idx);
      if(i===idx) t.scrollIntoView({inline:'center',behavior:'smooth',block:'nearest'});
    });
  }
  function go(idx, pause=false){ current=(idx+imgs.length)%imgs.length; setActive(current); if(pause) stop(); }
  function next(){ go(current+1); }
  function prev(){ go(current-1); }
  function play(){ if(timer) return; playBtn.textContent='⏸ Pause'; timer=setInterval(next,3500); }
  function stop(){ if(timer){clearInterval(timer); timer=null;} playBtn.textContent='▶︎ Play'; }

  prevBtn.addEventListener('click',()=>{prev();stop();});
  nextBtn.addEventListener('click',()=>{next();stop();});
  playBtn.addEventListener('click',()=>timer?stop():play());

  return { next, prev, play, stop, go };
}

/* ---- Instantiate both galleries ---- */
/* Team: uses your existing legacy IDs (stage/dots/thumbs/prevBtn/nextBtn/playBtn) */
const TEAM_IMAGES = [
  'Team-1.jpeg',
  'Team-2.jpeg',
  'Team-3.jpeg',
  'Team-4.jpeg',
  'Team-5.jpeg',
  'Team-6.jpeg',
  'Team-7.jpeg',
  'Team-8.jpeg'

];
const team = createGallery('team', TEAM_IMAGES, 'Team photo');

/* Professional: expects prefixed IDs (pro-stage, pro-dots, ...) from the new section */
const PRO_IMAGES = [
  'pro-1.jpeg','pro-2.jpeg','pro-3.jpeg','pro-4.jpeg','pro-5.jpeg','pro-6.jpeg'
];
const pro = createGallery('pro', PRO_IMAGES, 'Professional photo');
</script>

